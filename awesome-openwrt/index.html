<!DOCTYPE html>
<html lang="en">

<head>
    <title>Dich&#x27;s Blog</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noodp"/>

    <link rel="stylesheet" href="https://blog.dich.bid/style.css">
    <link rel="stylesheet" href="https://blog.dich.bid/color/blue.css">

    <meta name="description" content="">

    <meta property="og:description" content="">
    <meta property="og:title" content="Dich's Blog">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://blog.dich.bid/awesome-openwrt/">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="">
    <meta name="twitter:title" content="Dich's Blog">
    <meta property="twitter:domain" content="blog.dich.bid">
    <meta property="twitter:url" content="https://blog.dich.bid/awesome-openwrt/">

                <link rel="alternate" type="application/atom+xml" title="Dich&#x27;s Blog Atom Feed" href="https://blog.dich.bid/atom.xml" />
        <link rel="shortcut icon" type="image/webp" href="/dich.webp">
    
    <!-- âœ… Added center alignment styles -->
    <style>
        .footer {
            text-align: center;
            padding: 1rem 0;
        }

        .footer__inner {
            display: flex;
            justify-content: center;
            flex-direction: column;
            align-items: center;
        }

        .copyright {
            text-align: center;
        }
    </style>
</head>

<body class="">
<div class="container">
    
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                    
                <a href="https://blog.dich.bid" style="text-decoration: none;">
                    <div class="logo">
                      
                            Dich&#x27;s Blog
                        
                    </div>
                </a>
            </div>
        </div>

        
        
                <nav class="menu">
            <ul class="menu__inner">
                <li class="active"><a href="https://blog.dich.bid">Blog</a></li>
            
                <li><a href="https://blog.dich.bid/archive">Archive</a></li>
            
                <li><a href="https://blog.dich.bid/weekly">Weekly</a></li>
            
                <li><a href="https://blog.dich.bid/tags">Tags</a></li>
            
                <li><a href="https://blog.dich.bid/search">Search</a></li>
            
                <li><a href="https://blog.dich.bid/links">Links</a></li>
            
                <li><a href="https://blog.dich.bid/atom.xml">Rss</a></li>
            
                <li><a href="https://blog.dich.bid/about">About me</a></li>
            
                <li><a href="https://github.com/Dichgrem" target="_blank" rel="noopener noreferrer">My github</a></li>
            
                <li><a href="https://github.com/getzola/zola" target="_blank" rel="noopener noreferrer">Zola frame</a></li>
            </ul>
        </nav>
    
    
        
    </header>
    

    <main>
        <div class="content">
            
    <div class="post" data-pagefind-body>
        
    <h1 class="post-title"><a href="https://blog.dich.bid/awesome-openwrt/">ç»¼åˆå·¥ç¨‹:OpenWrtè·¯ç”±éƒ¨ç½²ä¸è½¯ä»¶ç¼–è¯‘</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2023-08-12
        </span>

    </div>

    
        <span class="post-tags-inline">
                :: tags:&nbsp;
                <a class="post-tag" href="https://blog.dich.bid/tags/zong-he-gong-cheng/">#ç»¼åˆå·¥ç¨‹</a></span>
    

        <div class="post-content">
            <p>å‰è¨€ openwrt æ˜¯ä¸€ä¸ªè‡ªç”±çš„ã€å…¼å®¹æ€§å¥½çš„åµŒå…¥å¼ linux å‘è¡Œç‰ˆã€‚ä½œä¸ºè½¯è·¯ç”±ç©å®¶å¿…å¤‡çš„ä¸€æ¬¾ç¥å™¨ï¼Œå¯ä»¥å®ç°è¯¸å¦‚å»å¹¿å‘Šï¼Œå¤šæ‹¨å’Œç§‘å­¦ä¸Šç½‘ç­‰å¤šç§åŠŸèƒ½ã€‚æœ¬æ–‡ä»‹ç»openwrtåœ¨å„ç§å¹³å°ä¸Šçš„éƒ¨ç½²æµç¨‹ã€‚</p>
<span id="continue-reading"></span><h2 id="yao-shi-xian-de-mu-biao"><strong>è¦å®ç°çš„ç›®æ ‡</strong></h2>
<ul>
<li>1.IPv6 åˆ†é…åˆ°æ¯ä¸ªè®¾å¤‡ï¼›</li>
<li>2.NATç±»å‹ä¸ºNAT1ï¼ˆå…¨é”¥å½¢ï¼‰ï¼›</li>
<li>3.å¯æ§çš„æµé‡è®°å½•ä¸IPæ§åˆ¶/QOSï¼›</li>
<li>4.å¯é çš„ç¡¬ä»¶åŠ é€Ÿï¼›</li>
<li>5.å¤šçº¿å¤šæ’­/å®½å¸¦æé€Ÿï¼›</li>
<li>6.PPPoEæ‹¨å·ï¼Œæ›¿ä»£ä¸€éƒ¨åˆ†å…‰çŒ«åŠŸèƒ½ï¼›</li>
<li>7.æ™ºèƒ½DNSé…ç½®ä¸å»å¹¿å‘Šï¼›</li>
<li>8.VPNé…ç½®å›å®¶ï¼›</li>
<li>9.å®ç°é€æ˜ä»£ç†ã€‚</li>
</ul>
<h2 id="da-zhi-si-lu">å¤§è‡´æ€è·¯</h2>
<ul>
<li>ä½¿ç”¨é«˜æ€§èƒ½çš„X86ä¸»æœºç®¡ç†æ‹¨å·å’Œ DHCP å†…ç½‘çš„å·¥ä½œï¼Œå…¶ä»–æ— çº¿è·¯ç”±å™¨æ¡¥æ¥åšAPï¼ŒMeshç»„ç½‘ï¼›</li>
<li>ä½¿ç”¨ç»•è¿‡ä¸­å›½æµé‡æ¨¡å¼ï¼Œå›½å†…æµé‡ä¸ç»è¿‡ä»£ç†å†…æ ¸ç›´æ¥ç›´è¿ï¼ŒåŠ å¿«å›½å†…ç½‘ç«™è®¿é—®ã€‚ä¿æŒå°½å¯èƒ½é«˜çš„ NAT ç­‰çº§ï¼›</li>
<li>ä¸ä½¿ç”¨æ—è·¯ç”±ï¼Œæ‰€æœ‰æµé‡è¿‡ä¸»è·¯ç”±ï¼›ç”±äºç¬¬äºŒç‚¹ä»£ç†æŒ‚äº†ä¹Ÿä¸å½±å“å›½å†…æ­£å¸¸ä¸Šç½‘ï¼›</li>
<li>å›½å†…å¤–åŸŸååˆ†æµæŸ¥è¯¢ï¼Œå›½å†…åŸŸåæŸ¥è¿è¥å•† DNS ï¼Œå›½å¤–åŸŸåç»ä»£ç†æŸ¥å›½å¤– DoH ï¼Œç›´æ¥è¿”å›çœŸå® IPï¼›</li>
<li>è‰¯å¥½çš„å›½å†… IPv6 æ”¯æŒï¼Œåªå¯¹å›½å†…åŸŸåè¿”å› IPv6 AAAA ç»“æœï¼Œå›½å¤–åŸŸååªç”¨ IPv4ï¼›</li>
<li>å…¼å®¹ Adguard Home ï¼Œæ–¹ä¾¿ç®¡ç†åŸŸåé»‘ç™½åå•ï¼›</li>
<li>å¯¹èƒ½ç›´è¿çš„å›½å¤–æœåŠ¡èƒ½è¿”å›æœ€ä¼˜çš„èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯ç»•è·¯å…¶ä»–åœ°æ–¹ï¼›</li>
</ul>
<h2 id="xuan-ze-he-gua-de-she-bei"><strong>é€‰æ‹©åˆé€‚çš„è®¾å¤‡</strong></h2>
<p>æ— è®ºæ˜¯ä¼ ç»Ÿçš„æ— çº¿è·¯ç”±å™¨è¿˜æ˜¯å°ä¸»æœºéƒ½æœ‰æˆä¸ºopenwrtè·¯ç”±çš„æ½œåŠ›ã€‚æˆªæ­¢åˆ°ä»Šå¤©ï¼Œå·²ç»æœ‰20å¤šä¸ªå“ç‰Œï¼ˆå°ç±³ï¼Œåç¡•ï¼Œé”æ·ï¼Œåä¸‰ç­‰ï¼‰30å¤šç§æ¶æ„ï¼ˆx86,ipq,bcm,mtdç­‰ï¼‰æ”¯æŒåˆ·å…¥openwrtï¼›ä½ å¯ä»¥åœ¨è¿™ä¸ª<a rel="noopener nofollow noreferrer" target="_blank" href="https://mao.fan/select">ç½‘ç«™</a>æ‰¾åˆ°ç¬¦åˆä½ é¢„ç®—å’Œå…¶ä»–è¦æ±‚çš„ï¼Œèƒ½åˆ·æœºçš„è·¯ç”±å™¨ã€‚
ä¼ ç»Ÿå®¶ç”¨æ— çº¿è·¯ç”±å™¨ç”±äºä¸»é¢‘ä½ï¼Œå†…å­˜å°ï¼Œå¹¶ä¸é€‚åˆä½œä¸ºè½¯è·¯ç”±ï¼›è€Œ NAS-è½¯è·¯ç”±ä¸€ä½“å¼ åˆæœ‰ all in boom çš„é£é™©ï¼Œå› æ­¤æ¨èX86å¹³å°ä½œä¸ºç‰©ç†æœºã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨ armbian å¹³å°æˆ–æ˜¯å¼€å‘æ¿ï¼Œä¾‹å¦‚ç½‘å¿ƒäº‘è€æ¯é¸¡ã€æ ‘è“æ´¾ç­‰è®¾å¤‡ã€‚æˆªè‡³æœ¬æ–‡æ’°å†™æ—¶é—´ï¼ŒäºŒæ‰‹å¹³å°ä¸Šçš„ä»·æ ¼ä¸å¤ªåˆ©å¥½ï¼šä¸€å°J1900å¹³å°çš„å”®ä»·å¾€å¾€åœ¨200å·¦å³ï¼Œè€Œä¸“é—¨çš„å¤šç½‘å£å·¥æ§æœºä»·æ ¼åœ¨200åˆ°1000ä¸ç­‰ï¼Œæ ‘è“æ´¾æ›´æ˜¯æˆä¸ºäº†ç†è´¢äº§å“ï¼Œéœ€è¦æ…é‡é€‰æ‹©ã€‚</p>
<h2 id="xuan-ze-he-gua-de-xi-tong"><strong>é€‰æ‹©åˆé€‚çš„ç³»ç»Ÿ</strong></h2>
<p>é™¤äº†openwrtä¸»çº¿å¤–ï¼Œè¿˜å¯ä»¥é€‰æ‹©ï¼š</p>
<ul>
<li>
<p><a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/coolsnowwolf/lede">LEDE</a> é«˜è´¨é‡ï¼Œæ›´æ–°å¿«é€Ÿï¼Œå…·æœ‰æ–°ç‰¹æ€§çš„openwrtåˆ†æ”¯ã€‚</p>
</li>
<li>
<p><a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/istoreos">iStoreOS</a> iStoreOSæ˜¯openwrtçš„ä¸€ä¸ªåˆ†æ”¯ï¼ŒiStoreOS æä¾›äº†è½¯ä»¶ä¸­å¿ƒï¼šiStoreï¼Œä»¥åŠè¾ƒç¾è§‚çš„ç•Œé¢å’Œdockeræ”¯æŒï¼Œå¯¹æ–°æ‰‹ä½“éªŒè¾ƒå¥½ã€‚</p>
</li>
<li>
<p><a rel="noopener nofollow noreferrer" target="_blank" href="https://firmware-selector.immortalwrt.org/">ImmortalWrt</a> æ˜¯ä¸€ä¸ªåŸç‰ˆopenwrtçš„åˆ†æ”¯ï¼Œä¸­æ–‡ä¼˜åŒ–å¥½ï¼Œæ›´æ–°ä¹Ÿå‹¤å¿«ï¼Œå†…ç½®é•œåƒæºå¯ä»¥ç›´è¿ä¸‹è½½&amp;æ›´æ–°ã€‚</p>
</li>
</ul>
<h2 id="ru-he-de-dao-yi-ge-openwrtxi-tong"><strong>å¦‚ä½•å¾—åˆ°ä¸€ä¸ªopenwrtç³»ç»Ÿ</strong></h2>
<ol>
<li>ä½¿ç”¨ç¼–è¯‘å¥½çš„ç°æˆçš„é•œåƒ:</li>
</ol>
<ul>
<li>æ©å±±è®ºå›ä¸Šçš„"é«˜å¤§å…¨","ç²¾å“å°åŒ…"ç­‰ç­‰ï¼Œä½†å­˜åœ¨ä¸€å®šé£é™©ï¼›</li>
<li>ä½¿ç”¨<a rel="noopener nofollow noreferrer" target="_blank" href="https://downloads.openwrt.org">å®˜æ–¹å›ºä»¶</a>ä¸‹è½½å¾—åˆ°ä¸€ä¸ªæœ€å°åŒ–çš„ç³»ç»Ÿï¼Œå†ä¸€æ­¥æ­¥æ·»åŠ è‡ªå·±è¦ç”¨çš„åŒ…ï¼›æ³¨æ„éœ€è¦æ ¹æ®ä½ çš„ubootæ¥é€‰æ‹©ï¼Œæ³¨æ„å›ºä»¶åç§°æ˜¯å¦å¸¦äº†uboot_mod!</li>
</ul>
<ol start="2">
<li>è‡ªè¡Œç¼–è¯‘:</li>
</ol>
<ul>
<li><a rel="noopener nofollow noreferrer" target="_blank" href="https://openwrt.ai/?target=x86%2F64&amp;id=generic">Openwrt.ai</a>åœ¨çº¿ç¼–è¯‘
ä¸€ä¸ªå›ºä»¶ï¼›</li>
<li>å¯ä»¥ä½¿ç”¨GitHub action äº‘ç¼–è¯‘ä¸€ä¸ªå›ºä»¶ï¼›</li>
<li>å¯ä»¥åœ¨æœ¬åœ°linuxç¯å¢ƒä¸­è¿›è¡Œç¼–è¯‘ã€‚</li>
</ul>
<ol start="3">
<li>ImageBuilder</li>
</ol>
<ul>
<li>ä½¿ç”¨<a rel="noopener nofollow noreferrer" target="_blank" href="https://firmware-selector.openwrt.org/">Openwrt å®˜æ–¹ImageBuilderç¼–è¯‘</a></li>
<li>è‡ªè¡Œä¸‹è½½å¯¹åº”çš„ImageBuilderåŒ…å¹¶æ„å»º.</li>
</ul>
<h2 id="toolchain-sdk-imagebuilder">Toolchain/SDK/ImageBuilder</h2>
<table><thead><tr><th>ç‰¹æ€§</th><th><strong>Toolchain</strong></th><th><strong>SDK</strong></th><th><strong>Image Builder</strong></th></tr></thead><tbody>
<tr><td>åŒ…å«å†…å®¹</td><td>ä»…äº¤å‰ç¼–è¯‘å·¥å…·é“¾ï¼ˆäºŒè¿›åˆ¶ç‰ˆ GCCã€ldã€muslã€binutilsï¼‰</td><td>å®Œæ•´äº¤å‰ç¼–è¯‘ç¯å¢ƒ + feeds è„šæœ¬ + package ç›®å½•ï¼Œç”¨äº <code>.ipk</code> åŒ…å¼€å‘</td><td>é¢„ç¼–è¯‘çš„æ ¹æ–‡ä»¶ç³»ç»Ÿ + opkg åŒ…ï¼ˆæ— éœ€æºç ç¼–è¯‘ï¼‰ï¼Œç”¨äºå¿«é€Ÿå®šåˆ¶å›ºä»¶æ˜ åƒ</td></tr>
<tr><td>å…¸å‹ç”¨é€”</td><td>ç”¨äºç¼–è¯‘ç¬¬ä¸‰æ–¹ç¨‹åºæˆ– CIï¼Œå¦‚ hello-world ç¤ºä¾‹</td><td>ç¼–å†™å’Œç¼–è¯‘ <code>.ipk</code> åŒ…ï¼Œæœ¬åœ°æˆ–è‡ªåŠ¨åŒ–ç¯å¢ƒä¸­ç¦»çº¿å¼€å‘</td><td>å¿«é€Ÿç”Ÿæˆå¯åˆ·å†™çš„å›ºä»¶é•œåƒï¼Œé›†æˆæ‰€éœ€åŒ…ä¸”æ— éœ€å®Œæ•´æºç æ ‘</td></tr>
<tr><td>è§£å‹å³ç”¨</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr>
<tr><td>åœ¨æºç æ ‘ä¸­çš„ä½œç”¨</td><td><code>make toolchain/install</code> è‡ªåŠ¨è¯†åˆ«å¹¶ä½¿ç”¨è·³è¿‡ç¼–è¯‘æµç¨‹</td><td>æºç æ ‘ä¸­ä¸ä¼šè§¦å‘ SDK å®‰è£…ï¼Œéœ€è¦æ‰‹åŠ¨è§£å‹å¹¶è¿›å…¥å…¶ç›®å½•ä½¿ç”¨</td><td>ä¸ä½¿ç”¨æºç æ ‘ï¼Œç›´æ¥åœ¨ Image Builder æ ¹ç›®å½•ä¸‹è¿è¡Œ <code>make image</code> ç­‰å‘½ä»¤</td></tr>
<tr><td>å¤§å°</td><td>è¾ƒå°ï¼ˆå‡ å MBï¼‰</td><td>è¾ƒå¤§ï¼ˆä¸Šç™¾ MBï¼‰</td><td>ä¸­ç­‰ï¼ˆçº¦æ•°ç™¾ MBï¼Œå› åŒ…å«é¢„ç¼–è¯‘åŒ…ï¼‰</td></tr>
<tr><td>æ„å»ºæ—¶é—´</td><td>å‡ ç§’åˆ°å‡ åˆ†é’Ÿ</td><td>å‡ åˆ†é’Ÿåˆ°åå‡ åˆ†é’Ÿï¼ˆå–å†³äº feeds å¤§å°ï¼‰</td><td>æå¿«ï¼Œå¯åœ¨å‡ åç§’åˆ°å‡ åˆ†é’Ÿå†…å®Œæˆå®šåˆ¶é•œåƒ</td></tr>
<tr><td>å…¼å®¹æ€§</td><td>ä¸å¯¹åº” Release å®Œå…¨åŒ¹é…</td><td>ä¸å¯¹åº” Release å®Œå…¨åŒ¹é…</td><td>ä¸å¯¹åº” Release å®Œå…¨åŒ¹é…</td></tr>
<tr><td>ä½¿ç”¨éš¾åº¦</td><td>ç®€å•ï¼Œåªéœ€è§£å‹å¹¶è®¾ç½® PATH</td><td>é€‚ä¸­ï¼Œéœ€è¦ç†è§£ feeds æœºåˆ¶åŠåŒ…ç®¡ç†</td><td>æœ€ç®€å•ï¼Œé€‚åˆç»ˆç«¯ç”¨æˆ·æˆ–å¿«é€Ÿæµ‹è¯•ç¯å¢ƒ</td></tr>
</tbody></table>
<h2 id="x86ping-tai-an-zhuang-liu-cheng"><strong>X86å¹³å°å®‰è£…æµç¨‹ï¼š</strong></h2>
<ol start="0">
<li>å®‰è£…å‡†å¤‡ï¼š</li>
</ol>
<ul>
<li>
<p>ä¸€ä¸ªUç›˜ä¸ä¸€å°åŒç½‘å£ç‰©ç†æœº</p>
</li>
<li>
<p>openwrt çš„ç¼–è¯‘åŒ…ï¼Œå®˜æ–¹ç½‘ç«™ï¼š<a rel="noopener nofollow noreferrer" target="_blank" href="https://firmware-selector.openwrt.org/?version=24.10.0-rc2&amp;target=ipq40xx%2Fgeneric&amp;id=glinet_gl-a1300">OpenWrt Firmware Selector</a></p>
</li>
<li>
<p>æˆ–è€…ç”¨ç”± eSir å¤§ä½¬ç¼–è¯‘çš„<a rel="noopener nofollow noreferrer" target="_blank" href="https://drive.google.com/drive/folders/1uRXg_krKHPrQneI3F2GNcSVRoCgkqESr">æ‡’äººåŒ…</a></p>
</li>
<li>
<p>PE å¯åŠ¨ç›˜ï¼Œè¿™é‡Œæ¨è<a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/VirtualHotBar/HotPEToolBox">HotPE</a></p>
</li>
<li>
<p><a rel="noopener nofollow noreferrer" target="_blank" href="https://www.roadkil.net/program.php?ProgramID=12#google_vignette">img å†™ç›˜å·¥å…·</a></p>
</li>
</ul>
<ol>
<li>è¿›å…¥PEç¯å¢ƒï¼š</li>
</ol>
<ul>
<li>æ‰“å¼€å¾®PEï¼Œå°†å…¶å®‰è£…è¿›Uç›˜ä¸­ï¼Œå®‰è£…å®Œæˆåå°† img å·¥å…·å’Œ openwrt åŒ…ä¸€èµ·æ”¾è¿›å»ï¼›</li>
<li>å°†Uç›˜æ’å…¥ç›®æ ‡ä¸»æœºï¼Œè¿›å…¥ BIOS-boot è®¾ç½®Uç›˜ä¼˜å…ˆå¯åŠ¨ï¼Œå„ä¸»æ¿è¿›å…¥ BIOS çš„æŒ‰é”®ä¸åŒï¼Œä¸ç¡®å®šçš„è¯å»ºè®®éƒ½è¯•ä¸€éã€‚</li>
</ul>
<ol start="2">
<li>æ ¼å¼åŒ–ç¡¬ç›˜å¹¶å†™ç›˜</li>
</ol>
<ul>
<li>è¿›å…¥PEç¯å¢ƒä¸­ï¼Œå¯ä»¥çœ‹åˆ°å­˜åœ¨åä¸ºâ€œåˆ†åŒºåŠ©æ‰‹â€çš„è½¯ä»¶ï¼Œæ‰“å¼€å®ƒå¹¶å°†ç›®æ ‡ä¸»æœºç¡¬ç›˜æ ¼å¼åŒ–ï¼›æ³¨æ„ä¸è¦åˆ†åŒºï¼ä¸è¦åˆ†åŒºï¼ä¸è¦è®¾ç½®æ–‡ä»¶ç³»ç»Ÿï¼å¦åˆ™åç»­å¯èƒ½æ— æ³•ç¼–è¯‘ï¼ç‚¹å‡»å·¦ä¸Šè§’æäº¤å¹¶æ‰§è¡Œ</li>
<li>æ‰“å¼€imgå†™ç›˜å·¥å…·ï¼Œå°†openwrtåŒ…å†™å…¥ç¡¬ç›˜ï¼Œæ³¨æ„ä¸è¦å†™è¿›Uç›˜é‡Œã€‚</li>
</ul>
<ol start="3">
<li>è¿›å…¥é…ç½®ç•Œé¢</li>
</ol>
<ul>
<li>é‡å¯ç³»ç»Ÿå¹¶å¿«é€Ÿæ‹”å‡ºUç›˜ï¼Œé¿å…é‡æ–°è¿›å…¥PEï¼›è¿™æ—¶ç³»ç»Ÿå¼€å§‹è¿è¡Œäº†ã€‚æ³¨æ„Esirå›ºä»¶æ˜¯ä¸è·‘ç çš„ï¼Œæ— éœ€æ‹…å¿ƒã€‚- ä¸€ä¸ªUç›˜ä¸ä¸€å°åŒç½‘å£ç‰©ç†æœº</li>
<li>å½“çœ‹åˆ° <code>please press Enter to activate this console</code>è¿™ä¸ªæç¤ºçš„æ—¶å€™ç³»ç»Ÿå°±å®‰è£…å®Œæ¯•äº†ã€‚å¯ä½¿ç”¨ passwd å‘½ä»¤è®¾ç½®å¯†ç ã€‚è½¯è·¯ç”±å°†è‡ªåŠ¨è·å–IPåœ°å€ï¼Œéšåæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€è¯¥åœ°å€ï¼Œå³å¯çœ‹åˆ° Lucl ç•Œé¢ã€‚</li>
</ul>
<ol start="4">
<li>å¦‚æœä½ ä½¿ç”¨å®˜æ–¹å›ºä»¶ï¼Œæ³¨æ„:</li>
</ol>
<ul>
<li>ç¡¬ç›˜ç©ºé—´æœ‰ä¸€éƒ¨åˆ†æ²¡æœ‰è¢«æ ¼å¼åŒ–ï¼Œå¯ä»¥æ‰‹åŠ¨æ ¼å¼åŒ–ä¸ºext4å¹¶æŒ‚è½½ã€‚</li>
<li>æ³¨æ„åˆå§‹IPå¾€å¾€æ˜¯192.168.1.1ï¼Œå¦‚æœå’Œå…‰çŒ«å†²çªéœ€è¦åœ¨ç½‘ç»œ-æ¥å£ä¸­æ›´æ”¹ã€‚</li>
<li>åŸºæœ¬ç³»ç»Ÿä¸»é¢˜æ¯”è¾ƒç®€é™‹ï¼Œå¯ä»¥ä½¿ç”¨luci-theme-argonã€‚</li>
<li>åˆ·é”™ä¸»é¢˜æ— æ³•æ‰“å¼€luciï¼šé€šè¿‡ SSH ç™»å½•è·¯ç”±å™¨ï¼Œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªå·²çŸ¥æ­£å¸¸çš„ä¸»é¢˜ï¼ˆä¾‹å¦‚ Bootstrapï¼‰ï¼š
<code>uci set luci.main.mediaurlbase='/luci-static/bootstrap' uci commit luci /etc/init.d/uhttpd restart</code>
ç„¶åé‡æ–°è®¿é—® Web ç•Œé¢ï¼ŒæŸ¥çœ‹æ˜¯å¦æ¢å¤æ­£å¸¸ã€‚</li>
</ul>
<h2 id="x86ping-tai-ben-di-bian-yi-wan-zheng-openwrt"><strong>X86å¹³å°æœ¬åœ°ç¼–è¯‘å®Œæ•´openwrt</strong></h2>
<ul>
<li>
<p><strong>ç³»ç»Ÿç‰ˆæœ¬ï¼šDebian 11 æˆ–è€… Ubuntu LTS</strong></p>
</li>
<li>
<p><strong>ç½‘ç»œè¦æ±‚ï¼šç§‘å­¦ä¸Šç½‘ç¯å¢ƒï¼Œé…ç½®æ¨è 2H4G ä»¥ä¸Š</strong></p>
</li>
<li>
<p><strong>ç¼–è¯‘ä¾èµ–</strong></p>
</li>
</ul>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">sudo</span><span> apt update
</span><span style="color:#ffb964;">sudo</span><span> apt install</span><span style="color:#ffb964;"> -y </span><span>\
</span><span>  ack antlr3 asciidoc autoconf automake autopoint binutils bison build-essential \
</span><span>  bzip2 ccache clang cmake cpio curl device-tree-compiler diffutils diffstat findutils flex gawk \
</span><span>  gcc-multilib g++-multilib git gettext gperf grep haveged help2man intltool \
</span><span>  libelf-dev libfuse-dev libgmp3-dev libgl1-mesa-dev libgraphene-1.0-dev libglib2.0-dev \
</span><span>  libltdl-dev libmpc-dev libmpfr-dev libncurses-dev libpython3-dev libreadline-dev libssl-dev \
</span><span>  libtool lrzsz make mesa-common-dev msmtp ninja-build p7zip p7zip-full patch pkgconf \
</span><span>  perl python-is-python3 python3 python3-dev python3-distutils-extra python3-pip python3-pyelftools \
</span><span>  python3-setuptools qemu-utils rsync scons squashfs-tools subversion swig texinfo uglifyjs \
</span><span>  upx-ucl unzip vim wget gnu-which xmlto xxd zlib1g-dev genisoimage llvm llvm-runtime docutils-common \
</span><span>  ecj fastjar java-wrappers libeclipse-jdt-core-java libgnutls-dane0t64 \
</span><span>  libgnutls-openssl27t64 libgnutls28-dev libidn2-dev libp11-kit-dev libtasn1-6-dev libtasn1-doc \
</span><span>  libunbound8 libyaml-dev lld lld-18 nettle-dev python3-docutils python3-ply python3-roman re2c
</span></code></pre>
<ul>
<li><strong>æ¸…ç†</strong></li>
</ul>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">sudo</span><span> apt autoremove</span><span style="color:#ffb964;"> --purge
</span><span style="color:#ffb964;">sudo</span><span> apt clean
</span></code></pre>
<ul>
<li><strong>æ–°å»ºä¸€ä¸ªç”¨æˆ·ï¼Œç”¨äºç¼–è¯‘å›ºä»¶(å¯é€‰)</strong></li>
</ul>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">useradd -m</span><span> openwrt  </span><span style="color:#888888;"># æ–°å»ºä¸€ä¸ªåä¸º openwrt çš„ç”¨æˆ·
</span></code></pre>
<blockquote>
<p>ä¸å¯ä»¥ä½¿ç”¨Rootç”¨æˆ·è¿›è¡Œç¼–è¯‘!!!</p>
</blockquote>
<ul>
<li><strong>ä¿®æ”¹ç”¨æˆ·é»˜è®¤çš„ Shell</strong></li>
</ul>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">apt</span><span> install</span><span style="color:#ffb964;"> -y</span><span> sudo
</span><span style="color:#ffb964;">usermod -s</span><span> /bin/bash openwrt
</span></code></pre>
<ul>
<li><strong>åˆ‡æ¢ç”¨æˆ·</strong></li>
</ul>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">su</span><span> openwrt
</span><span>cd </span><span style="color:#ffb964;">~
</span></code></pre>
<ul>
<li><strong>æ‹‰å–æºç ï¼Œè¿™é‡Œç”¨çš„æ˜¯ ImmortalWrt 24.10 åˆ†æ”¯æºç ï¼š</strong></li>
</ul>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">git</span><span> clone https://github.com/immortalwrt/immortalwrt.git
</span><span>cd immortalwrt
</span></code></pre>
<ul>
<li><strong>é€‰æ‹©åˆ†æ”¯</strong></li>
</ul>
<p>å¦‚æœä½ æƒ³è¦ç¼–è¯‘ç¨³å®šç‰ˆ(stable),ä½¿ç”¨</p>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">git</span><span> checkout xxx </span><span style="color:#888888;">#ä¾‹å¦‚git checkout v24.10.2
</span></code></pre>
<p>å¦‚æœä½ æƒ³è¦ç¼–è¯‘æœ€æ–°ç‰ˆ(snapshot),ä½¿ç”¨</p>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">git</span><span> switch xxx </span><span style="color:#888888;">#ä¾‹å¦‚git switch openwrt-24.10
</span></code></pre>
<h3 id="mu-lu-shuo-ming">ç›®å½•è¯´æ˜</h3>
<table><thead><tr><th>åç§°</th><th>ä½œç”¨</th></tr></thead><tbody>
<tr><td><code>Makefile</code></td><td><strong>æ•´ä¸ª OpenWrt æ„å»ºç³»ç»Ÿçš„æ€»å…¥å£ç‚¹</strong>ï¼ˆé¡¶å±‚ Makefileï¼‰ï¼Œè¿è¡Œ <code>make menuconfig</code>ã€<code>make</code> éƒ½ä¾èµ–å®ƒ</td></tr>
<tr><td><code>Config.in</code></td><td>Kconfig ç³»ç»Ÿçš„å…¥å£é…ç½®æ–‡ä»¶ï¼Œå†³å®š <code>make menuconfig</code> èœå•æ˜¾ç¤ºä»€ä¹ˆé€‰é¡¹</td></tr>
<tr><td><code>config/</code></td><td>æ„å»ºç³»ç»Ÿçš„é»˜è®¤é…ç½®æ¨¡æ¿ã€èœå•é€»è¾‘ï¼Œå’Œ <code>menuconfig</code> ç›¸å…³</td></tr>
<tr><td><code>include/</code></td><td>åŒ…å«é€šç”¨ makefile ç‰‡æ®µçš„ç›®å½•ï¼ˆæ¯”å¦‚ç¼–è¯‘é€‰é¡¹ã€å‡½æ•°å®šä¹‰ï¼‰</td></tr>
<tr><td><code>rules.mk</code></td><td>æ‰€æœ‰åŒ…ç¼–è¯‘é€šç”¨è§„åˆ™éƒ½å†™åœ¨è¿™é‡Œï¼Œ<code>include $(TOPDIR)/rules.mk</code> æ˜¯å¸¸è§è¯­å¥</td></tr>
<tr><td><code>feeds.conf.default</code></td><td>å®šä¹‰ Feed æºï¼ˆå³å¯é€‰çš„è½¯ä»¶æºï¼‰ï¼Œå¯ç”¨äºç®¡ç†å¤–éƒ¨åŒ…ï¼Œæ¯”å¦‚ <code>luci</code>ã€<code>packages</code></td></tr>
<tr><td><code>feeds/</code> <em>(å…‹éš†åè¿˜æ²¡å‡ºç°)</em></td><td><code>./scripts/feeds update -a</code> åæ‰ä¼šå‡ºç°ï¼Œç”¨æ¥ä¿å­˜å¤–éƒ¨ feed çš„ä»£ç </td></tr>
<tr><td><code>package/</code></td><td>OpenWrt è‡ªå¸¦çš„æ ¸å¿ƒåŒ…å’Œç¬¬ä¸‰æ–¹åŒ…ï¼ˆé™¤ feeds å¤–çš„ï¼‰éƒ½åœ¨è¿™ï¼Œç»“æ„æ˜¯ <code>package/&lt;åˆ†ç±»&gt;/&lt;åŒ…å&gt;</code></td></tr>
<tr><td><code>target/</code></td><td>æ”¯æŒçš„å¹³å°æ¶æ„ï¼Œæ¯”å¦‚ <code>x86</code>ã€<code>ramips</code>ã€<code>ath79</code>ã€<code>mediatek</code> ç­‰éƒ½åœ¨é‡Œé¢</td></tr>
<tr><td><code>toolchain/</code></td><td>ç¼–è¯‘å™¨é“¾ã€glibc/muslã€binutilsã€gcc éƒ½åœ¨è¿™é‡Œæ„å»º</td></tr>
<tr><td><code>tools/</code></td><td>æ„å»ºå·¥å…·ç›®å½•ï¼Œç¼–è¯‘å‰å·¥å…·å¦‚ <code>m4</code>ã€<code>autoconf</code>ã€<code>xz</code>ã€<code>patch</code> ç­‰æ”¾åœ¨è¿™</td></tr>
<tr><td><code>scripts/</code></td><td>è„šæœ¬å·¥å…·ç›®å½•ï¼Œå¦‚ <code>feeds</code> ç®¡ç†ã€é•œåƒåˆå¹¶ã€menuconfig æ”¯æŒç­‰</td></tr>
<tr><td><code>LICENSES/</code></td><td>æ‰€æœ‰åŒ…/ç»„ä»¶çš„è®¸å¯è¯å½’æ¡£</td></tr>
<tr><td><code>COPYING</code></td><td>OpenWrt çš„ä¸»è®¸å¯è¯ï¼ˆGPLv2ï¼‰</td></tr>
<tr><td><code>README.md</code></td><td>ç®€è¦ä»‹ç»å¦‚ä½•å¼€å§‹ä½¿ç”¨ OpenWrt çš„è¯´æ˜æ–‡æ¡£</td></tr>
<tr><td><code>BSDmakefile</code></td><td>ä¸º BSD ç³»ç»Ÿä¸€äº›å…¼å®¹ makefileï¼ŒLinux ç”¨æˆ·ç”¨ä¸åˆ°</td></tr>
</tbody></table>
<ul>
<li><strong>æ·»åŠ è½¯ä»¶æº,å¯è‡ªè¡Œæ·»åŠ è½¯ä»¶æºè‡³ feeds.conf.default æ–‡ä»¶</strong></li>
</ul>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">vim</span><span> feeds.conf.default
</span></code></pre>
<p><strong>å¸¸ç”¨æº</strong></p>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">src-git</span><span> kenzo https://github.com/kenzok8/openwrt-packages
</span><span style="color:#ffb964;">src-git</span><span> small https://github.com/kenzok8/small
</span><span style="color:#ffb964;">src-git</span><span> haibo https://github.com/haiibo/openwrt-packages
</span><span style="color:#ffb964;">src-git</span><span> liuran001 https://github.com/liuran001/openwrt-packages
</span></code></pre>
<p><strong>å¸¸ç”¨ä»“åº“</strong></p>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">src/gz</span><span> kwrt_core https://dl.openwrt.ai/releases/24.10/targets/x86/64/6.6.83
</span><span style="color:#ffb964;">src/gz</span><span> kwrt_base https://dl.openwrt.ai/releases/24.10/packages/x86_64/base
</span><span style="color:#ffb964;">src/gz</span><span> kwrt_packages https://dl.openwrt.ai/releases/24.10/packages/x86_64/packages
</span><span style="color:#ffb964;">src/gz</span><span> kwrt_luci https://dl.openwrt.ai/releases/24.10/packages/x86_64/luci
</span><span style="color:#ffb964;">src/gz</span><span> kwrt_routing https://dl.openwrt.ai/releases/24.10/packages/x86_64/routing
</span><span style="color:#ffb964;">src/gz</span><span> kwrt_kiddin9 https://dl.openwrt.ai/releases/24.10/packages/x86_64/kiddin9
</span></code></pre>
<ul>
<li><strong>å•ç‹¬æ·»åŠ </strong>ï¼ˆåœ¨æ›´æ–°å¹¶å®‰è£…æ’ä»¶ä¹‹å‰æ‰§è¡Œï¼‰ä¾‹å¦‚ï¼š</li>
</ul>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">git</span><span> clone https://github.com/chenmozhijin/turboacc.git
</span></code></pre>
<ul>
<li><strong>æ›´æ–°å¹¶å®‰è£…æ’ä»¶</strong></li>
</ul>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">./scripts/feeds</span><span> clean
</span><span style="color:#ffb964;">./scripts/feeds</span><span> update</span><span style="color:#ffb964;"> -a
</span><span style="color:#ffb964;">./scripts/feeds</span><span> install</span><span style="color:#ffb964;"> -a
</span></code></pre>
<table><thead><tr><th><code>./scripts/feeds update -a</code></th><th>åŒæ­¥ï¼æ›´æ–° <strong>å¤–éƒ¨ feed</strong>ï¼ˆpackagesã€luciã€routing ç­‰ï¼‰çš„ Git ä»“åº“åˆ°æœ¬åœ° <code>feeds/</code> ç›®å½•</th></tr></thead><tbody>
<tr><td><code>./scripts/feeds install -a</code></td><td>æŠŠä½ åœ¨ feeds é‡Œé€‰è¦ç”¨çš„åŒ… <strong>é“¾æ¥</strong> åˆ°æºç æ ‘çš„ <code>package/feeds/</code>ï¼Œè®©å®ƒä»¬å‚ä¸ç¼–è¯‘</td></tr>
</tbody></table>
<ul>
<li><strong>è‡ªå®šä¹‰é…ç½®</strong></li>
</ul>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#888888;">#!/usr/bin/env bash
</span><span style="color:#888888;"># diy-part2.sh â€” åœ¨é•œåƒç”Ÿæˆæ—¶æ³¨å…¥é»˜è®¤è®¾ç½®å’Œå®šåˆ¶ SSH æ¨ªå¹…åŠæ¨¡å‹ä¿®å¤
</span><span>
</span><span style="color:#888888;"># 1. é»˜è®¤ hostnameï¼ˆå¯é€‰ï¼‰
</span><span style="color:#ffb964;">sed -i </span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">s/=ImmortalWrt/=my-device/</span><span style="color:#556633;">&#39;</span><span> package/base-files/files/bin/config_generate
</span><span>
</span><span style="color:#888888;"># 2. é»˜è®¤ IP åœ°å€ï¼ˆå¯é€‰ï¼‰
</span><span style="color:#ffb964;">sed -i </span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">s/192.168.1.1/192.168.5.1/</span><span style="color:#556633;">&#39;</span><span> package/base-files/files/bin/config_generate
</span><span>
</span><span style="color:#888888;"># 3. é»˜è®¤ root å¯†ç ï¼ˆè¯·æ¢æˆå®‰å…¨å¯†ç ï¼‰
</span><span style="color:#ffb964;">HASH</span><span>=</span><span style="color:#99ad6a;">$(</span><span style="color:#ffb964;">openssl</span><span style="color:#99ad6a;"> passwd</span><span style="color:#ffb964;"> -1 </span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">yourpassword</span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">)
</span><span style="color:#ffb964;">sed -i </span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">s|root::0:0:99999|root:${</span><span style="color:#ffb964;">HASH</span><span style="color:#99ad6a;">}:0:0:99999|</span><span style="color:#556633;">&quot;</span><span> package/base-files/files/etc/shadow
</span><span>
</span><span style="color:#888888;"># 4. è®¾ç½®é»˜è®¤ LuCI ä¸»é¢˜ä¸º argonï¼ˆå†…ç½®åœ¨ luci feedsï¼‰
</span><span style="color:#ffb964;">cat </span><span>&gt;&gt;package/base-files/files/etc/uci-defaults/99_set_theme </span><span style="color:#99ad6a;">&lt;&lt;</span><span style="color:#556633;">&#39;</span><span style="color:#8fbfdc;">EOF</span><span style="color:#556633;">&#39;
</span><span style="color:#99ad6a;">uci set luci.main.mediaurlbase=/luci-static/argon
</span><span style="color:#99ad6a;">uci commit luci
</span><span style="color:#8fbfdc;">EOF
</span><span style="color:#ffb964;">chmod</span><span> +x package/base-files/files/etc/uci-defaults/99_set_theme
</span><span>
</span><span style="color:#888888;"># 5. é»˜è®¤åŠ è½½ BBR æ‹¥å¡æ§åˆ¶ç®—æ³•
</span><span style="color:#ffb964;">mkdir -p</span><span> package/base-files/files/etc/sysctl.d
</span><span style="color:#ffb964;">cat </span><span>&gt;&gt;package/base-files/files/etc/sysctl.d/99-bbr.conf </span><span style="color:#99ad6a;">&lt;&lt;</span><span style="color:#556633;">&#39;</span><span style="color:#8fbfdc;">EOF</span><span style="color:#556633;">&#39;
</span><span style="color:#99ad6a;">net.core.default_qdisc=fq_codel
</span><span style="color:#99ad6a;">net.ipv4.tcp_congestion_control=bbr
</span><span style="color:#8fbfdc;">EOF
</span><span>
</span><span style="color:#888888;"># æ£€æŸ¥BBR: sysctl net.ipv4.tcp_congestion_control
</span><span>
</span><span style="color:#888888;"># 6. å°†é»˜è®¤ shell ä¿®æ”¹ä¸º bash
</span><span style="color:#ffb964;">sed -i </span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">s|/bin/ash|/bin/bash|g</span><span style="color:#556633;">&quot;</span><span> package/base-files/files/etc/passwd
</span><span style="color:#888888;"># è¯·åœ¨ .config ä¸­æ·»åŠ  TARGET_PACKAGES += bash
</span><span>
</span><span style="color:#888888;"># 7. è‡ªå®šä¹‰ SSH ç™»å½•æ¨ªå¹…ï¼ˆbannerï¼‰
</span><span style="color:#ffb964;">mkdir -p</span><span> package/base-files/files/etc
</span><span style="color:#8fbfdc;">if </span><span>[ </span><span style="color:#ffb964;">-f </span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">scripts/custom-files/banner.txt</span><span style="color:#556633;">&quot; </span><span>]; </span><span style="color:#8fbfdc;">then
</span><span>  </span><span style="color:#ffb964;">cp</span><span> scripts/custom-files/banner.txt package/base-files/files/etc/banner
</span><span style="color:#8fbfdc;">else
</span><span>  </span><span style="color:#ffb964;">cat </span><span>&gt;package/base-files/files/etc/banner </span><span style="color:#99ad6a;">&lt;&lt;</span><span style="color:#556633;">&#39;</span><span style="color:#8fbfdc;">EOF</span><span style="color:#556633;">&#39;
</span><span style="color:#99ad6a;">Welcome to MyDevice (ImmortalWrt)\n
</span><span style="color:#8fbfdc;">EOF
</span><span style="color:#8fbfdc;">fi
</span><span>
</span><span style="color:#888888;"># 8. è‡ªå®šä¹‰ LuCI æ¦‚è§ˆè®¾å¤‡å‹å· ğŸ› 
</span><span style="color:#888888;"># é€šè¿‡ uci-defaults è„šæœ¬å†™å…¥ /tmp/sysinfo/model
</span><span style="color:#ffb964;">cat </span><span>&gt;&gt;package/base-files/files/etc/uci-defaults/99-model-fix </span><span style="color:#99ad6a;">&lt;&lt;</span><span style="color:#556633;">&#39;</span><span style="color:#8fbfdc;">EOF</span><span style="color:#556633;">&#39;
</span><span style="color:#99ad6a;">#!/bin/sh
</span><span style="color:#99ad6a;"># è®¾ç½®è‡ªå®šä¹‰è®¾å¤‡å‹å·
</span><span style="color:#99ad6a;">mkdir -p /tmp/sysinfo
</span><span style="color:#99ad6a;">echo &quot;Your Router Model&quot; &gt; /tmp/sysinfo/model
</span><span style="color:#99ad6a;">exit 0
</span><span style="color:#8fbfdc;">EOF
</span><span style="color:#ffb964;">chmod</span><span> +x package/base-files/files/etc/uci-defaults/99-model-fix
</span></code></pre>
<ul>
<li>æ‰§è¡Œ <strong>make menuconfig</strong> å‘½ä»¤è¿›å…¥ç¼–è¯‘èœå•ã€‚</li>
</ul>
<table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½æè¿°</th><th>ä¼˜ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody>
<tr><td><code>make menuconfig</code></td><td>ä»¥ ncurses ç•Œé¢äº¤äº’å¼åœ°æµè§ˆã€ä¿®æ”¹å½“å‰ <code>.config</code> ä¸æœ€æ–° Kconfig ä¸­çš„æ‰€æœ‰é€‰é¡¹</td><td>ç•Œé¢å‹å¥½ï¼Œæ”¯æŒæœç´¢å’Œåˆ†ç±»ï¼›å¯ç›´è§‚è°ƒæ•´</td><td>æƒ³æ‰‹åŠ¨æŒ‘é€‰/è°ƒæ•´é…ç½®æ—¶</td></tr>
<tr><td><code>make oldconfig</code></td><td>åœ¨å‘½ä»¤è¡Œé€é¡¹å¯¹æ¯” <code>.config</code> ä¸æœ€æ–° Kconfigï¼šä¿ç•™åŸå€¼ã€æç¤ºæ–°å¢é¡¹ã€åˆ é™¤åºŸå¼ƒé¡¹</td><td>å¿«é€ŸåŒæ­¥ï¼Œåªå¯¹æ–°å¢é€‰é¡¹å‘å‡ºæç¤ºï¼›æ— éœ€ç•Œé¢</td><td>è‡ªåŠ¨åŒ–è„šæœ¬æˆ–å¿«é€ŸåŒæ­¥é…ç½®æ—¶</td></tr>
<tr><td><code>make defconfig</code></td><td>å¿½ç•¥å½“å‰ <code>.config</code>ï¼Œç›´æ¥åŠ è½½æ¶æ„/æ¿çº§ç›®å½•ä¸‹çš„é»˜è®¤é…ç½®ï¼ˆ<code>defconfig</code>ï¼‰</td><td>ä¸€é”®ç”Ÿæˆå®˜æ–¹/å¹³å°æ¨èçš„ã€Œå¹²å‡€ã€é…ç½®</td><td>æƒ³é‡ç½®åˆ°å®˜æ–¹é»˜è®¤æˆ–é‡æ–°å¼€å§‹æ—¶</td></tr>
</tbody></table>
<h3 id="bian-yi-pei-zhi-cai-dan-shuo-ming-bu-fen"><strong>ç¼–è¯‘é…ç½®èœå•è¯´æ˜ï¼ˆéƒ¨åˆ†ï¼‰</strong></h3>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">Target</span><span> System (x86)                                </span><span style="color:#888888;"># é€‰æ‹©ç›®æ ‡å¹³å°
</span><span style="color:#ffb964;">â””â”€â”€</span><span> Subtarget (x86_64)                             </span><span style="color:#888888;"># é€‰æ‹© 64-bit å­æ¶æ„
</span><span>    </span><span style="color:#ffb964;">â””â”€â”€</span><span> Target Profile (Generic)                   </span><span style="color:#888888;"># â€œGenericâ€ è¡¨ç¤ºé€šç”¨ x86_64 è®¾å¤‡
</span><span>        </span><span style="color:#ffb964;">â””â”€â”€</span><span> Target Images                          </span><span style="color:#888888;"># å›ºä»¶é•œåƒè®¾ç½®
</span><span>            </span><span style="color:#ffb964;">â”œâ”€â”€</span><span> ramdisk                            </span><span style="color:#888888;"># å¯é€‰å†…å­˜ç›˜é•œåƒ
</span><span>            </span><span style="color:#ffb964;">â”‚</span><span>   â”œâ”€â”€ Compression                    </span><span style="color:#888888;"># å‹ç¼©ç±»å‹ï¼ˆå¦‚ none è¡¨ç¤ºæ— å‹ç¼©ï¼‰
</span><span>            </span><span style="color:#ffb964;">â”‚</span><span>   â”œâ”€â”€ Root filesystem archives       </span><span style="color:#888888;"># å‹ç¼©å­˜æ¡£ï¼šcpio.gz æˆ– tar.gz
</span><span>            </span><span style="color:#ffb964;">â”‚</span><span>   â””â”€â”€ Root filesystem images         </span><span style="color:#888888;"># æ–‡ä»¶ç³»ç»Ÿé•œåƒï¼šext4ã€squashfsã€Gzip
</span><span>            </span><span style="color:#ffb964;">â””â”€â”€</span><span> Image Options                      </span><span style="color:#888888;"># é•œåƒé€‰é¡¹
</span><span>                </span><span style="color:#ffb964;">â”œâ”€â”€</span><span> Kernel partition size           </span><span style="color:#888888;"># å†…æ ¸åˆ†é…åˆ†åŒºå¤§å°
</span><span>                </span><span style="color:#ffb964;">â”œâ”€â”€</span><span> Root filesystem partition size </span><span style="color:#888888;"># æ ¹æ–‡ä»¶ç³»ç»Ÿåˆ†åŒºå¤§å°
</span><span>                </span><span style="color:#ffb964;">â””â”€â”€</span><span> Make /var persistent            </span><span style="color:#888888;"># æ˜¯å¦ä¿ç•™ /var æŒä¹…åŒ–
</span><span>
</span><span style="color:#ffb964;">Global</span><span> build settings                             </span><span style="color:#888888;"># å…¨å±€æ„å»ºè®¾ç½®
</span><span style="color:#ffb964;">Advanced</span><span> configuration options (for developers)  </span><span style="color:#888888;"># å¼€å‘è€…é«˜çº§é€‰é¡¹
</span><span style="color:#ffb964;">Build</span><span> the OpenWrt Image Builder                  </span><span style="color:#888888;"># ç¼–è¯‘é•œåƒæ„å»ºå™¨
</span><span style="color:#ffb964;">Build</span><span> the OpenWrt SDK                            </span><span style="color:#888888;"># æ„å»ºäº¤å‰ç¼–è¯‘ SDK
</span><span style="color:#ffb964;">Package</span><span> the OpenWrtâ€‘based Toolchain              </span><span style="color:#888888;"># æ‰“åŒ… OpenWrt å·¥å…·é“¾
</span><span style="color:#ffb964;">Image</span><span> configuration                              </span><span style="color:#888888;"># é•œåƒæ€»ä½“é…ç½®é¡µé¢
</span><span>
</span><span style="color:#ffb964;">Base</span><span> system         </span><span style="color:#888888;"># ç³»ç»ŸåŸºç¡€ç»„ä»¶
</span><span style="color:#ffb964;">Administration      </span><span style="color:#888888;"># ç®¡ç†å·¥å…·ï¼ˆå¦‚ sshã€ç®¡ç†å‘˜è„šæœ¬ï¼‰
</span><span style="color:#ffb964;">Boot</span><span> Loaders        </span><span style="color:#888888;"># å¼•å¯¼ç¨‹åºï¼ˆå¦‚ grubã€syslinuxï¼‰
</span><span style="color:#ffb964;">Development         </span><span style="color:#888888;"># ç¼–è¯‘/è°ƒè¯•è¾…åŠ©å·¥å…·
</span><span style="color:#ffb964;">Extra</span><span> packages      </span><span style="color:#888888;"># é™„åŠ åº”ç”¨ï¼ˆå¦‚ wgetã€curlï¼‰
</span><span style="color:#ffb964;">Firmware            </span><span style="color:#888888;"># å›ºä»¶å·¥å…·
</span><span style="color:#ffb964;">Fonts               </span><span style="color:#888888;"># å­—ä½“æ”¯æŒ
</span><span style="color:#ffb964;">Kernel</span><span> modules      </span><span style="color:#888888;"># x86 å†…æ ¸æ¨¡å—é©±åŠ¨
</span><span style="color:#ffb964;">Languages           </span><span style="color:#888888;"># ç¼–ç¨‹è¯­è¨€åŒ…ï¼ˆå¦‚ Python3ã€Node.jsï¼‰
</span><span style="color:#ffb964;">Libraries           </span><span style="color:#888888;"># ç³»ç»Ÿåº“ä¾èµ–
</span><span style="color:#ffb964;">LuCI                </span><span style="color:#888888;"># Web UI å‰ç«¯
</span><span style="color:#ffb964;">â””â”€â”€</span><span> Collections
</span><span style="color:#ffb964;">â””â”€â”€</span><span> Modules
</span><span style="color:#ffb964;">â””â”€â”€</span><span> Applications
</span><span style="color:#ffb964;">â””â”€â”€</span><span> Themes
</span><span style="color:#ffb964;">â””â”€â”€</span><span> Protocols
</span><span style="color:#ffb964;">â””â”€â”€</span><span> Libraries
</span><span style="color:#ffb964;">â””â”€â”€</span><span> defaultâ€‘settings
</span><span>
</span><span style="color:#ffb964;">Mail                </span><span style="color:#888888;"># é‚®ä»¶å®¢æˆ·ç«¯
</span><span style="color:#ffb964;">Multimedia          </span><span style="color:#888888;"># åª’ä½“å·¥å…·ï¼ˆå¦‚ ffmpegï¼‰
</span><span style="color:#ffb964;">Network             </span><span style="color:#888888;"># ç½‘ç»œåŠŸèƒ½ï¼ˆå¦‚ openvpnã€wireguardï¼‰
</span><span style="color:#ffb964;">Sound               </span><span style="color:#888888;"># éŸ³é¢‘ç›¸å…³è½¯ä»¶
</span><span style="color:#ffb964;">Utilities           </span><span style="color:#888888;"># å¸¸ç”¨å®ç”¨ç¨‹åºï¼ˆå¦‚ vimã€htopï¼‰
</span><span style="color:#ffb964;">Xorg                </span><span style="color:#888888;"># æ¡Œé¢ç¯å¢ƒæ”¯æŒï¼ˆX11 å›¾å½¢ç³»ç»Ÿï¼‰
</span><span>
</span></code></pre>
<ul>
<li><strong>é¢„ä¸‹è½½ç¼–è¯‘æ‰€éœ€çš„è½¯ä»¶åŒ…</strong></li>
</ul>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">make</span><span> download</span><span style="color:#ffb964;"> -j8
</span></code></pre>
<ul>
<li><strong>æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§</strong></li>
</ul>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">find</span><span> dl</span><span style="color:#ffb964;"> -size -1024c -exec</span><span> ls</span><span style="color:#ffb964;"> -l </span><span>{} \;
</span></code></pre>
<p>æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§å‘½ä»¤å¯ä»¥åˆ—å‡ºä¸‹è½½ä¸å®Œæ•´çš„æ–‡ä»¶ï¼Œå°äº1kçš„æ–‡ä»¶å±äºä¸‹è½½ä¸å®Œæ•´ï¼Œå¦‚æœå­˜åœ¨åˆ™ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ é™¤ï¼Œç„¶åé‡æ–°ä¸‹è½½ç¼–è¯‘æ‰€éœ€çš„è½¯ä»¶åŒ…ï¼Œå†æ¬¡æ£€æŸ¥.ç¡®è®¤æ‰€æœ‰æ–‡ä»¶å®Œæ•´å¯å¤§å¤§æé«˜ç¼–è¯‘æˆåŠŸç‡ï¼Œé¿å…æµªè´¹æ—¶é—´</p>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">find</span><span> dl</span><span style="color:#ffb964;"> -size -1024c -exec</span><span> rm</span><span style="color:#ffb964;"> -f </span><span>{} \;
</span></code></pre>
<ul>
<li><strong>æœ€åç¼–è¯‘å›ºä»¶ï¼ˆ-j åé¢æ˜¯çº¿ç¨‹æ•°ï¼Œé¦–æ¬¡ç¼–è¯‘æ¨èç”¨å•çº¿ç¨‹ï¼‰ç¼–è¯‘å®Œæˆåè¾“å‡ºè·¯å¾„æ˜¯bin/targets.</strong></li>
</ul>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">make</span><span> V=s</span><span style="color:#ffb964;"> -j1
</span><span>
</span><span style="color:#ffb964;">æˆ–è€…ä½¿ç”¨</span><span> make world</span><span style="color:#ffb964;"> -j1</span><span> V=s </span><span style="color:#cf6a4c;">2</span><span>&gt;&amp;</span><span style="color:#cf6a4c;">1 </span><span>| </span><span style="color:#ffb964;">tee</span><span> world_debug.log
</span><span>
</span><span style="color:#ffb964;">å¦‚æœæŠ¥é”™å¯æŸ¥çœ‹</span><span> grep</span><span style="color:#ffb964;"> -E </span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">(error|fatal|Cannot install package)</span><span style="color:#556633;">&quot;</span><span> world_debug.log</span><span style="color:#ffb964;"> -n
</span></code></pre>
<table><thead><tr><th>makeå±‚çº§</th><th>ç›®å½•ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody>
<tr><td>make[1]</td><td>é¡¶å±‚ Makefile</td><td>è§£æä¾èµ–ï¼Œè°ƒåº¦æ¨¡å—</td></tr>
<tr><td>make[2]</td><td><code>tools/</code></td><td>ç¼–è¯‘è¾…åŠ©å·¥å…·</td></tr>
<tr><td>make[2]</td><td><code>toolchain/</code></td><td>ç¼–è¯‘äº¤å‰ç¼–è¯‘å·¥å…·é“¾</td></tr>
<tr><td>make[2]</td><td><code>target/linux/</code></td><td>ç¼–è¯‘å†…æ ¸åŠè®¾å¤‡æ ‘</td></tr>
<tr><td>make[2]</td><td><code>package/</code></td><td>è¿›å…¥åŒ…ç®¡ç†ï¼Œè°ƒåº¦åŒ…æ„å»º</td></tr>
<tr><td>make[3]</td><td><code>package/libs/libc</code></td><td>å•ä¸ªåŒ…çš„ Makefile</td></tr>
<tr><td>make[3]</td><td><code>package/utils/busybox</code></td><td>å•ä¸ªåŒ…çš„ Makefile</td></tr>
<tr><td>make[4]</td><td><code>build_dir/target-...</code></td><td>åŒ…æºç ç›®å½•ï¼Œè¿è¡Œæºç çš„ make</td></tr>
<tr><td>make[4]</td><td><code>build_dir/target-linux-...</code></td><td>å†…æ ¸æºç ç›®å½•</td></tr>
</tbody></table>
<h2 id="er-ci-bian-yi">äºŒæ¬¡ç¼–è¯‘</h2>
<table><thead><tr><th>å‘½ä»¤</th><th>æ¸…é™¤å†…å®¹</th><th>ä¿ç•™å†…å®¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody>
<tr><td><code>make clean</code></td><td>åˆ é™¤ <code>bin/</code> é•œåƒã€<code>build_dir/</code> ç¼–è¯‘äº§ç‰©</td><td><code>.config</code>ã€<code>staging_dir/</code>ã€<code>toolchain/</code> ç­‰</td><td>å°ä¿®æ”¹åé‡å»ºé•œåƒï¼Œé€Ÿåº¦å¿«ï¼Œå¸¸ç”¨äºå¢é‡ç¼–è¯‘ã€‚</td></tr>
<tr><td><code>make dirclean</code></td><td>å’Œ <code>make clean</code> ä¸€æ ·ï¼Œè¿˜åˆ é™¤ <code>staging_dir/</code>ã€<code>toolchain/</code>ã€<code>logs</code></td><td><code>.config</code></td><td>å½»åº•é‡å»ºäº¤å‰ç¼–è¯‘ç¯å¢ƒï¼Œé€‚åˆæ›´æ”¹ç¼–è¯‘é…ç½®å¦‚ <code>.config</code>ã€feeds ç­‰ã€‚</td></tr>
<tr><td><code>make distclean</code></td><td>åˆ é™¤ <code>make dirclean</code> çš„æ‰€æœ‰å†…å®¹ + feeds ä¸‹è½½æ–‡ä»¶ + <code>.config</code>ã€patch ç­‰æ‰€æœ‰çŠ¶æ€</td><td>åªæœ‰æºç ç›®å½•ä¿æŒä¸å˜</td><td>ä¸“ç”¨äºå›åˆ°ä¸€ä¸ªâ€œé›¶é…ç½®ã€é‡åšä¸€åˆ‡â€çš„çŠ¶æ€ï¼Œå®Œå…¨ä»å¤´å¼€å§‹æ„å»ºã€‚</td></tr>
</tbody></table>
<p>æ¢å¤æ‰€æœ‰ä¿®æ”¹ï¼ˆåŒ…æ‹¬æœªè·Ÿè¸ªæ–‡ä»¶ï¼‰:</p>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">git</span><span> clean</span><span style="color:#ffb964;"> -fd
</span><span style="color:#ffb964;">git</span><span> restore</span><span style="color:#ffb964;"> --source</span><span>=v24.10.2</span><span style="color:#ffb964;"> --staged --worktree</span><span> .
</span></code></pre>
<h2 id="dwrt-fang-an">Dwrt æ–¹æ¡ˆ</h2>
<table><thead><tr><th>ä½œç”¨</th><th>ç»„ä»¶</th></tr></thead><tbody>
<tr><td>ä¸»é¢˜</td><td>argon</td></tr>
<tr><td>Shell</td><td>bash</td></tr>
<tr><td>SSH æœåŠ¡å™¨</td><td>dropbear</td></tr>
<tr><td>Web æœåŠ¡å™¨</td><td>uhttpd</td></tr>
<tr><td>DNS/DHCP æœåŠ¡</td><td>dnsmasqâ€‘full</td></tr>
<tr><td>åŠ å¯†åº“</td><td>openssl</td></tr>
<tr><td>å‹ç¼©ç®—æ³•</td><td>zram+zstd</td></tr>
<tr><td>æ‹¥å¡æ§åˆ¶</td><td>bbr</td></tr>
<tr><td>é˜²ç«å¢™</td><td>nftables + iptables</td></tr>
<tr><td>è°ƒåº¦æ¨¡å—</td><td>BPF + kmod-sched-xxx</td></tr>
<tr><td>æ—¶é—´åŒæ­¥</td><td>ntpd-full</td></tr>
<tr><td>æ–‡æœ¬ç¼–è¾‘</td><td>vim-fullâ€¯vim-runtime</td></tr>
<tr><td>ç¼–è¯‘ä¼˜åŒ–</td><td>LTO + O3</td></tr>
</tbody></table>
<p>è¦å¯ç”¨çš„è½¯ä»¶åŒ…ï¼š</p>
<p><strong>base</strong></p>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">autocore</span><span> base-files bash block-mount ca-bundle coremark curl dnsmasq-full dropbear ds-lite e2fsprogs fdisk firewall4 fstools grub2-bios-setup htop kmod-8139cp kmod-8139too kmod-amazon-ena kmod-amd-xgbe kmod-atlantic kmod-bnx2 kmod-bnx2x kmod-button-hotplug kmod-drm-amdgpu kmod-drm-i915 kmod-dwmac-intel kmod-e1000 kmod-e1000e kmod-forcedeth kmod-fs-f2fs kmod-fs-vfat kmod-i40e kmod-iavf kmod-igb kmod-igbvf kmod-igc kmod-ixgbe kmod-ixgbevf kmod-lib-zstd kmod-mlx4-core kmod-mlx5-core kmod-mmc kmod-pcnet32 kmod-phy-broadcom kmod-r8101 kmod-r8125 kmod-r8126 kmod-r8168 kmod-sdhci kmod-tcp-bbr kmod-tg3 kmod-tulip kmod-usb-hid kmod-vmxnet3 libc libgcc libustream-mbedtls lm-sensors-detect logd lsblk luci-app-fan luci-app-filemanager luci-app-firewall luci-app-log-viewer luci-app-package-manager luci-app-syscontrol luci-app-upnp  luci-base luci-compat luci-lib-fs luci-lib-ipkg  mkf2fs mtd nano netifd odhcp6c odhcpd-ipv6only openssh-sftp-server opkg partx-utils pciutils ppp ppp-mod-pppoe resolveip swconfig uci uclient-fetch urandom-seed urngd usbutils wget-ssl zram-swap
</span></code></pre>
<p><strong>cli</strong></p>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">btop</span><span> iperf3 tcpdump
</span></code></pre>
<p><strong>luci</strong></p>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">luci-app-argon</span><span> luci-app-upnp luci-app-ttyd luci-app-eqosplus luci-app-timecontrol luci-app-parentcontrol luci-app-homeproxy luci-app-daed
</span></code></pre>
<p><strong>lib</strong></p>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">kmod-ipt-conntrack</span><span> kmod-ipt-nat kmod-nft-compat kmod-ipt-fullconenat kmod-ip6tables ca-certificates
</span></code></pre>
<h2 id="shi-yong-sdkkuai-su-bian-yi-bao">ä½¿ç”¨SDKå¿«é€Ÿç¼–è¯‘åŒ…</h2>
<p>é¦–å…ˆæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å¹¶å°†SDKå…‹éš†ä¸‹æ¥ï¼š</p>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">mkdir</span><span> imwrt-sdk
</span><span>cd ./imwrt-sdk
</span><span style="color:#ffb964;">wget</span><span> https://downloads.immortalwrt.org/snapshots/targets/mediatek/filogic/immortalwrt-sdk-mediatek-filogic_gcc-14.3.0_musl.Linux-x86_64.tar.zst
</span></code></pre>
<p>æ–°ç‰ˆæœ¬çš„SDKä½¿ç”¨ZSTDå‹ç¼©ï¼Œå› æ­¤è§£å‹çš„å‘½ä»¤ä¸º</p>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">tar -I</span><span> zstd</span><span style="color:#ffb964;"> -xvf</span><span> ./immortalwrt-sdk-mediatek-filogic_gcc-14.3.0_musl.Linux-x86_64.tar.zst
</span></code></pre>
<p>éšåè¿›å…¥è¯¥ç›®å½•å¹¶å’Œä¸€èˆ¬æµç¨‹ä¸€æ ·æ›´æ–°Feedsï¼š</p>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span>cd ./immortalwrt-sdk-mediatek-filogic_gcc-14.3.0_musl.Linux-x86_64/
</span><span style="color:#ffb964;">./scripts/feeds</span><span> update</span><span style="color:#ffb964;"> -a
</span><span style="color:#ffb964;">./scripts/feeds</span><span> install</span><span style="color:#ffb964;"> -a
</span></code></pre>
<p>æ›´æ–°å®Œæˆåå…‹éš†ä½ è¦ç¼–è¯‘çš„åŒ…çš„æºç åˆ°packageä¸‹ï¼š</p>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span>cd ./package/
</span><span style="color:#ffb964;">git</span><span> clone https://github.com/Dichgrem/luci-app-nyn.git
</span><span style="color:#ffb964;">cp</span><span> ./luci-app-nyn/luci-app-zzz ./
</span><span style="color:#ffb964;">cp</span><span> ./luci-app-nyn/zzz ./
</span><span style="color:#ffb964;">rm -rf</span><span> ./luci-app-nyn
</span><span>cd ../
</span></code></pre>
<p>éšåå¼€å§‹ç¼–è¯‘ï¼Œç¼–è¯‘ç»“æœåœ¨å¯¹åº”æ¶æ„çš„baseç›®å½•ä¸‹ï¼š</p>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#ffb964;">make</span><span> package/luci-app-zzz/compile V=s
</span><span>
</span><span style="color:#ffb964;">~/imwrt-sdk/immortalwrt-sdk-24.10.3-x86-64_gcc-13.3.0_musl.Linux-x86_64</span><span> dich@uos
</span><span style="color:#ffb964;">â¯</span><span> find ./</span><span style="color:#ffb964;"> -name </span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">zzz*.ipk</span><span style="color:#556633;">&quot;
</span><span style="color:#ffb964;">./bin/packages/x86_64/base/zzz_0.1.1-r1_x86_64.ipk
</span></code></pre>
<h2 id="chang-yong-ming-ling">å¸¸ç”¨å‘½ä»¤</h2>
<blockquote>
<p>æ³¨æ„ï¼ä¸èƒ½å‡çº§kmodå‰ç¼€çš„è½¯ä»¶åŒ…ï¼base-filesæ˜¯å±é™©åŒ…ï¼Œè°¨æ…å‡çº§ï¼</p>
</blockquote>
<pre data-lang="bash" style="background-color:#151515;color:#e8e8d3;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#888888;"># æ›´æ–°è½¯ä»¶åˆ—è¡¨
</span><span style="color:#ffb964;">opkg</span><span> update
</span><span>
</span><span style="color:#888888;"># åˆ—å‡ºå¯å‡çº§çš„éå†…æ ¸åŒ…
</span><span style="color:#ffb964;">opkg</span><span> list-upgradable | </span><span style="color:#ffb964;">grep -vE </span><span style="color:#556633;">&#39;</span><span style="color:#99ad6a;">^(kmod-|kernel)</span><span style="color:#556633;">&#39;
</span><span>
</span><span style="color:#888888;"># å‡çº§å•ä¸ªè½¯ä»¶åŒ…
</span><span style="color:#ffb964;">opkg</span><span> upgrade åŒ…å
</span><span>
</span><span style="color:#888888;"># å›ºä»¶ç‰ˆæœ¬å·
</span><span style="color:#ffb964;">vim</span><span> /etc/os-release
</span><span>
</span><span style="color:#888888;"># è„šæœ¬&amp;è„šæ³¨
</span><span style="color:#ffb964;">vim</span><span> /etc/openwrt_release
</span><span>
</span><span style="color:#888888;"># ASCIIå­—ç¬¦ç”»
</span><span style="color:#ffb964;">vim</span><span> /etc/banner
</span><span>
</span><span style="color:#888888;"># ç™»å½•è„šæœ¬æ˜¾ç¤º
</span><span style="color:#ffb964;">vim</span><span> /etc/profile
</span></code></pre>
<h2 id="chang-yong-ke-xue-cha-jian">å¸¸ç”¨ç§‘å­¦æ’ä»¶</h2>
<table><thead><tr><th>ç‰¹æ€§</th><th>HomeProxy</th><th>OpenClash</th><th>Passwall</th><th>ShellClash</th></tr></thead><tbody>
<tr><td><strong>æ ¸å¿ƒ</strong></td><td>Sing-boxã€Xray</td><td>Clash</td><td>Xrayã€Sing-box</td><td>Clashã€Xrayã€Sing-box</td></tr>
<tr><td><strong>UI ç®¡ç†</strong></td><td>âœ…ï¼ˆWeb UIã€æ¡Œé¢ç«¯ GUIï¼‰</td><td>âœ…ï¼ˆOpenClash Web UIï¼‰</td><td>âœ…ï¼ˆLuci Web UIï¼‰</td><td>âŒï¼ˆShell ç»ˆç«¯ç®¡ç†ï¼‰</td></tr>
<tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>æ€§èƒ½è¾ƒå¥½,ä½†åˆ†æµè®¾ç½®å¤æ‚</td><td>é€‚ç”¨äºclashç³»,æœºåœºé¦–é€‰</td><td>æ“ä½œç®€å•,åˆ†æµå®Œå–„,ä½†å¯¹è·¯ç”±å™¨æ€§èƒ½è¦æ±‚è¾ƒé«˜</td><td>æ²¡æœ‰UIç•Œé¢ï¼Œæ€§èƒ½æœ€å¥½ï¼Œæ”¯æŒå®Œå–„ï¼Œå¯ä»¥é€šè¿‡clashapiå®‰è£…UI</td></tr>
</tbody></table>
<h2 id="xiao-yuan-wang-duo-she-bei-fang-jian-ce">æ ¡å›­ç½‘å¤šè®¾å¤‡é˜²æ£€æµ‹</h2>
<p><strong>å¸¸è§æ£€æµ‹æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>TTLæ£€æµ‹æ³• è§£æ³•ï¼šæ’ä»¶ç»Ÿä¸€ä¿®å¤æˆ–ä½¿ç”¨æ¡¥æ¥ï¼›ä½¿ç”¨kmod-iptables-ipotæ¨¡å—ï¼›</li>
<li>User-Agent è§£æ³•ï¼šç»Ÿä¸€ç»è¿‡singboxä»£ç†æˆ–ä½¿ç”¨UA2F/UA3Fï¼›</li>
<li>æ—¶é—´æˆ³æ£€æµ‹æ³• è§£æ³•ï¼šç»Ÿä¸€NTPæœåŠ¡å™¨ï¼›</li>
</ul>
<p><strong>é«˜æ€§èƒ½å¼€é”€æ£€æµ‹æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>IP-IDæ£€æµ‹æ³• è§£æ³•ï¼šUDP over TCPæˆ–rkp-IPidï¼›</li>
<li>Flash cookie è§£æ³•ï¼šå†…ç½®é˜²ç«å¢™ç»„ä»¶ï¼›</li>
<li>DPIæ£€æµ‹æ³• æ·±åº¦åŒ…æ£€æµ‹ç‰¹å¾å€¼ è§£æ³•ï¼šä»£ç†åè®®ï¼›</li>
</ul>
<blockquote>
<p>é«˜æ€§èƒ½å¼€é”€çš„æ£€æµ‹æ–¹æ³•ä¼šæµªè´¹å¤§é‡æ€§èƒ½ï¼Œä¸€èˆ¬å¾ˆå°‘æœ‰å­¦æ ¡è¿™ä¹ˆåšã€‚IP-IDå’ŒFlashæ£€æµ‹æ³•å¦‚ä»Šå·²ç»ä¸å¤šè§ã€‚</p>
</blockquote>
<p><strong>TTLä¿®å¤</strong>:</p>
<pre style="background-color:#151515;color:#e8e8d3;"><code><span>ä¾èµ–åŒ…
</span><span>opkg install kmod-nft-core kmod-nft-bridge kmod-nft-net kmod-nft-offload kmod-nft-nat
</span><span>
</span><span>é¦–å…ˆæ£€æŸ¥ mangle è¡¨æ˜¯å¦å­˜åœ¨
</span><span>nft list tables
</span><span>
</span><span>åˆ›å»º mangle è¡¨ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
</span><span>nft add table ip mangle
</span><span>
</span><span>åˆ›å»º POSTROUTING é“¾ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
</span><span>nft add chain ip mangle POSTROUTING { type nat hook postrouting priority 0 \; }
</span><span>
</span><span>
</span><span>æ·»åŠ  TTL è§„åˆ™
</span><span>nft add rule ip mangle POSTROUTING ip ttl set 64
</span><span>
</span><span>æ£€æŸ¥è§„åˆ™æ˜¯å¦ç”Ÿæ•ˆ
</span><span>nft list table ip mangle
</span></code></pre>
<h2 id="openwrtgai-apmo-shi">Openwrtæ”¹APæ¨¡å¼</h2>
<p>æœ‰æ—¶å€™æˆ‘ä»¬ä½¿ç”¨X86åšä¸»è·¯ç”±ï¼Œæƒ³è®©æ— çº¿è·¯ç”±å™¨åªèµ·åˆ°å‘å°„ä¿¡å·çš„ä½œç”¨ï¼Œå°±å¯ä»¥å°†å…¶æ”¹ä¸ºAPæ¨¡å¼ï¼Œä¸€èˆ¬æ­¥éª¤ä¸ºï¼š</p>
<ul>
<li>æ›´æ”¹lanåœ°å€ï¼Œå°†lanå£åœ°å€æ”¹åˆ°ä¸»è·¯ç”±ä¸‹çš„ä¸€ä¸ªIP;</li>
<li>å…³é—­DHCPæœåŠ¡ï¼›</li>
<li>å…³é—­WANå£ï¼›</li>
<li>å…³é—­é˜²ç«å¢™çš„ç¦æ­¢è½¬å‘è§„åˆ™ï¼Œå…¨éƒ¨å…è®¸ï¼›</li>
<li>å°†X86ä¸»è·¯ç”±çš„ç½‘çº¿æ’åˆ°APçš„ä»»æ„ä¸€ä¸ªLANå£ã€‚</li>
</ul>
<h2 id="geng-xin-suo-you-bao">æ›´æ–°æ‰€æœ‰åŒ…</h2>
<pre style="background-color:#151515;color:#e8e8d3;"><code><span>opkg update
</span><span>
</span><span>opkg list-upgradable \
</span><span>| awk &#39;{print $1}&#39; \
</span><span>| grep -vE &#39;^(base-files|busybox|libc|libgcc|libstdc\+\+|procd|netifd|ubus|uci|kernel|kmod-|fstools|mtd|fwtool)$&#39; \
</span><span>| xargs -r opkg upgrade
</span></code></pre>
<h2 id="link">ğŸ”—</h2>
<ul>
<li><a rel="noopener nofollow noreferrer" target="_blank" href="https://openwrt.org/zh/docs/start">Openwrt wiki</a></li>
<li><a rel="noopener nofollow noreferrer" target="_blank" href="https://openwrt.ai/?target=ipq807x%2Fgeneric&amp;id=xiaomi_ax3600">OpenWrtåœ¨çº¿å®šåˆ¶ç¼–è¯‘</a></li>
<li><a rel="noopener nofollow noreferrer" target="_blank" href="https://www.cnblogs.com/tfel-ypoc/p/17226064.html">openwrt luci é¡µé¢æ— æ³•è®¿é—® é—®é¢˜æ’æŸ¥</a></li>
<li><a rel="noopener nofollow noreferrer" target="_blank" href="https://post.smzdm.com/p/axz6369w/">è¶…è¯¦ç»†ï¼Œå¤šå›¾ï¼Œç®€å•ï¼ŒOpenWRT è®¾ç½®ï¼ŒIPV6é…ç½®</a></li>
<li><a rel="noopener nofollow noreferrer" target="_blank" href="https://blog.csdn.net/weixin_44548582/article/details/121064734">ä¿å§†çº§-å…‰çŒ«æ”¹æ¡¥æ¥-è·¯ç”±æ‹¨å·-openwrtç«¯å£è½¬å‘</a></li>
</ul>

        </div>

        
        <div class="pagination">
            <div class="pagination__title">
                <span class="pagination__title-h">Thanks for reading! Read other posts?</span>
                <hr />
            </div>
            <div class="pagination__buttons">
                    <span class="button previous">
                        <a href="https://blog.dich.bid/awesome-pve-mcsm/">
                            <span class="button__icon">â†</span>&nbsp;
                            <span class="button__text">ç»¼åˆå·¥ç¨‹:PVEå®‰è£…ä¸MCæœåŠ¡å™¨æ­å»º</span>
                        </a>
                    </span>
                
                
                    <span class="button next">
                        <a href="https://blog.dich.bid/awesome-android-root/">
                            <span class="button__text">ç»¼åˆå·¥ç¨‹:å®‰å“åˆ·æœºä¸rootæ•™ç¨‹</span>&nbsp;
                            <span class="button__icon">â†’</span>
                        </a>
                    </span>
                </div>
        </div>
    
    </div>
    
    <div class="toc-container">
        <div class="toc">
            <div class="toc-title">ç›®å½•</div>
            <ul>
            
                <li class="toc-level-2">
                    <a href="#yao-shi-xian-de-mu-biao">è¦å®ç°çš„ç›®æ ‡</a>
                    
                </li>
            
                <li class="toc-level-2">
                    <a href="#da-zhi-si-lu">å¤§è‡´æ€è·¯</a>
                    
                </li>
            
                <li class="toc-level-2">
                    <a href="#xuan-ze-he-gua-de-she-bei">é€‰æ‹©åˆé€‚çš„è®¾å¤‡</a>
                    
                </li>
            
                <li class="toc-level-2">
                    <a href="#xuan-ze-he-gua-de-xi-tong">é€‰æ‹©åˆé€‚çš„ç³»ç»Ÿ</a>
                    
                </li>
            
                <li class="toc-level-2">
                    <a href="#ru-he-de-dao-yi-ge-openwrtxi-tong">å¦‚ä½•å¾—åˆ°ä¸€ä¸ªopenwrtç³»ç»Ÿ</a>
                    
                </li>
            
                <li class="toc-level-2">
                    <a href="#toolchain-sdk-imagebuilder">Toolchain&#x2F;SDK&#x2F;ImageBuilder</a>
                    
                </li>
            
                <li class="toc-level-2">
                    <a href="#x86ping-tai-an-zhuang-liu-cheng">X86å¹³å°å®‰è£…æµç¨‹ï¼š</a>
                    
                </li>
            
                <li class="toc-level-2">
                    <a href="#x86ping-tai-ben-di-bian-yi-wan-zheng-openwrt">X86å¹³å°æœ¬åœ°ç¼–è¯‘å®Œæ•´openwrt</a>
                    
                        <ul>
                        
                            <li class="toc-level-3">
                                <a href="#mu-lu-shuo-ming">ç›®å½•è¯´æ˜</a>
                                
                            </li>
                        
                            <li class="toc-level-3">
                                <a href="#bian-yi-pei-zhi-cai-dan-shuo-ming-bu-fen">ç¼–è¯‘é…ç½®èœå•è¯´æ˜ï¼ˆéƒ¨åˆ†ï¼‰</a>
                                
                            </li>
                        
                        </ul>
                    
                </li>
            
                <li class="toc-level-2">
                    <a href="#er-ci-bian-yi">äºŒæ¬¡ç¼–è¯‘</a>
                    
                </li>
            
                <li class="toc-level-2">
                    <a href="#dwrt-fang-an">Dwrt æ–¹æ¡ˆ</a>
                    
                </li>
            
                <li class="toc-level-2">
                    <a href="#shi-yong-sdkkuai-su-bian-yi-bao">ä½¿ç”¨SDKå¿«é€Ÿç¼–è¯‘åŒ…</a>
                    
                </li>
            
                <li class="toc-level-2">
                    <a href="#chang-yong-ming-ling">å¸¸ç”¨å‘½ä»¤</a>
                    
                </li>
            
                <li class="toc-level-2">
                    <a href="#chang-yong-ke-xue-cha-jian">å¸¸ç”¨ç§‘å­¦æ’ä»¶</a>
                    
                </li>
            
                <li class="toc-level-2">
                    <a href="#xiao-yuan-wang-duo-she-bei-fang-jian-ce">æ ¡å›­ç½‘å¤šè®¾å¤‡é˜²æ£€æµ‹</a>
                    
                </li>
            
                <li class="toc-level-2">
                    <a href="#openwrtgai-apmo-shi">Openwrtæ”¹APæ¨¡å¼</a>
                    
                </li>
            
                <li class="toc-level-2">
                    <a href="#geng-xin-suo-you-bao">æ›´æ–°æ‰€æœ‰åŒ…</a>
                    
                </li>
            
                <li class="toc-level-2">
                    <a href="#link">ğŸ”—</a>
                    
                </li>
            
            </ul>
        </div>
    </div>
    

            </div>
        </main>
    
            <footer class="footer">
        <div class="footer__inner">
                <div class="copyright">
                        <span>Â© 
    2026
 Dichgrem</span>
                    <span class="copyright-theme">
                        <span class="copyright-theme-sep"> :: CC BY-SA 4.0 :: A friend comes from distant lands</span>
                        </a>
                    </span>
                </div>
            </div>
    </footer>
    
</div>
    <script src="https://blog.dich.bid/copy.js"></script>
</body>
</html>

